#!/usr/bin/env node

const fs = require('fs')

console.log('pi')
const resolve = require('resolve')

function currentVals(str) {
	const options = {
		method: 'GET',
		url: 'http://download.finance.yahoo.com/d/quotes.csv?s=%40%5EDJI,' + str + '&f=nsl1op&e=.csv'
	}
	return  new Promise((resolve, reject) => {
		 resolve (axios(options))
	})
}

function readPFile(str) {
	return new Promise ((resolve, reject) => {
		fs.readFile(str, 'utf8',  function(err, data) {
			resolve(data)
		})
	})
	.then((res) => JSON.parse(res))
}

function writePFile(str, obj) {
	fs.writeFile(str, obj)
}

//function 

function getPortTotalWorth() {
	let total = 0
	new Promise((resolve, request) => {
		resolve(readPFile('./public/staticFiles/portfolio.json'))
	})
	// .then((res) => JSON.parse(res))
	.then((res) => res.map((dat) => {
		let port = readPFile('./public/staticFiles/portfolio.json')
		port.then((val) => console.log('val'))
	}))
	// .then((res) => console.log(res))
}

getPortTotalWorth()

function foo() {
	console.log('foo now')
}









